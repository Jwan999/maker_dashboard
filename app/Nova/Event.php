<?php

namespace App\Nova;

use App\Imports\AttendeesImport;
use App\Nova\Actions\AttendeesImporter;
use Gkermer\TextAutoComplete\TextAutoComplete;
use Illuminate\Http\Request;
use Laravel\Nova\Fields\BelongsToMany;
use Laravel\Nova\Fields\Date;
use Laravel\Nova\Fields\ID;
use Laravel\Nova\Fields\Number;
use Laravel\Nova\Fields\Text;
use Laravel\Nova\Fields\Textarea;
use Laravel\Nova\Http\Requests\NovaRequest;

class Event extends Resource
{

    public static function icon()
    {
        return '
<svg class="sidebar-icon" viewBox="0 0 135 119" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">

    <g id="Wireframe" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="Group-25" transform="translate(1.000000, 1.000000)" fill="var(--sidebar-icon)" fill-rule="nonzero" stroke="var(--sidebar-icon)" stroke-width="6">
            <path d="M124.566239,10.601382 L100.713129,10.601382 L100.713129,5.30069102 C100.713129,2.3732002 98.3399291,-5.68434189e-14 95.4124383,-5.68434189e-14 L87.4614018,-5.68434189e-14 C84.533911,-5.68434189e-14 82.1607108,2.3732002 82.1607108,5.30069102 L82.1607108,10.601382 L50.3565647,10.601382 L50.3565647,5.30069102 C50.3565647,2.3732002 47.9833645,-5.68434189e-14 45.0558736,-5.68434189e-14 L37.1048371,-5.68434189e-14 C34.1773463,-5.68434189e-14 31.8041461,2.3732002 31.8041461,5.30069102 L31.8041461,10.601382 L7.95103653,10.601382 C3.55980031,10.601382 -6.39488462e-13,14.1611823 -6.39488462e-13,18.5524186 L-6.39488462e-13,108.664166 C-6.39488462e-13,113.055402 3.55980031,116.615202 7.95103653,116.615202 L124.566239,116.615202 C128.957475,116.615202 132.517275,113.055402 132.517275,108.664166 L132.517275,18.5524186 C132.517275,14.1611823 128.957475,10.601382 124.566239,10.601382 Z M87.4614018,5.30069102 L95.4124383,5.30069102 L95.4124383,21.2027641 L87.4614018,21.2027641 L87.4614018,5.30069102 Z M37.1048371,5.30069102 L45.0558736,5.30069102 L45.0558736,13.2517275 L45.0558736,21.2027641 L37.1048371,21.2027641 L37.1048371,5.30069102 Z M127.216584,108.664166 C127.216584,110.127911 126.029984,111.314511 124.566239,111.314511 L7.95103653,111.314511 C6.48729112,111.314511 5.30069102,110.127911 5.30069102,108.664166 L5.30069102,18.5524186 C5.30069102,17.0886732 6.48729112,15.9020731 7.95103653,15.9020731 L31.8041461,15.9020731 L31.8041461,21.2027641 C31.8041461,24.1302549 34.1773463,26.5034551 37.1048371,26.5034551 L45.0558736,26.5034551 C47.9833645,26.5034551 50.3565647,24.1302549 50.3565647,21.2027641 L50.3565647,15.9020731 L82.1607108,15.9020731 L82.1607108,21.2027641 C82.1607108,24.1302549 84.533911,26.5034551 87.4614018,26.5034551 L95.4124383,26.5034551 C98.3399291,26.5034551 100.713129,24.1302549 100.713129,21.2027641 L100.713129,15.9020731 L124.566239,15.9020731 C126.029984,15.9020731 127.216584,17.0886732 127.216584,18.5524186 L127.216584,108.664166 Z" id="Shape"></path>
            <path d="M29.1538006,37.1048371 C21.8350736,37.1048371 15.9020731,43.0378376 15.9020731,50.3565647 C15.9020731,57.6752917 21.8350736,63.6082922 29.1538006,63.6082922 C36.4725276,63.6082922 42.4055281,57.6752917 42.4055281,50.3565647 C42.4055281,43.0378376 36.4725276,37.1048371 29.1538006,37.1048371 L29.1538006,37.1048371 Z M29.1538006,58.3076012 C24.7625644,58.3076012 21.2027641,54.7478009 21.2027641,50.3565647 C21.2027641,45.9653284 24.7625644,42.4055281 29.1538006,42.4055281 C33.5450368,42.4055281 37.1048371,45.9653284 37.1048371,50.3565647 C37.1048371,54.7478009 33.5450368,58.3076012 29.1538006,58.3076012 Z" id="Shape"></path>
            <path d="M66.2586377,37.1048371 C58.9399107,37.1048371 53.0069102,43.0378376 53.0069102,50.3565647 C53.0069102,57.6752917 58.9399107,63.6082922 66.2586377,63.6082922 C73.5773647,63.6082922 79.5103653,57.6752917 79.5103653,50.3565647 C79.5103653,43.0378376 73.5773647,37.1048371 66.2586377,37.1048371 Z M66.2586377,58.3076012 C61.8674015,58.3076012 58.3076012,54.7478009 58.3076012,50.3565647 C58.3076012,45.9653284 61.8674015,42.4055281 66.2586377,42.4055281 C70.6498739,42.4055281 74.2096742,45.9653284 74.2096742,50.3565647 C74.2096742,54.7478009 70.6498739,58.3076012 66.2586377,58.3076012 Z" id="Shape"></path>
            <path d="M103.363475,37.1048371 C96.0447478,37.1048371 90.1117473,43.0378376 90.1117473,50.3565647 C90.1117473,57.6752917 96.0447478,63.6082922 103.363475,63.6082922 C110.682202,63.6082922 116.615202,57.6752917 116.615202,50.3565647 C116.615202,43.0378376 110.682202,37.1048371 103.363475,37.1048371 Z M103.363475,58.3076012 C98.9722386,58.3076012 95.4124383,54.7478009 95.4124383,50.3565647 C95.4124383,45.9653284 98.9722386,42.4055281 103.363475,42.4055281 C107.754711,42.4055281 111.314511,45.9653284 111.314511,50.3565647 C111.314511,54.7478009 107.754711,58.3076012 103.363475,58.3076012 Z" id="Shape"></path>
            <path d="M29.1538006,74.2096742 C21.8350736,74.2096742 15.9020731,80.1426747 15.9020731,87.4614018 C15.9020731,94.7801288 21.8350736,100.713129 29.1538006,100.713129 C36.4725276,100.713129 42.4055281,94.7801288 42.4055281,87.4614018 C42.4055281,80.1426747 36.4725276,74.2096742 29.1538006,74.2096742 L29.1538006,74.2096742 Z M29.1538006,95.4124383 C24.7625644,95.4124383 21.2027641,91.852638 21.2027641,87.4614018 C21.2027641,83.0701656 24.7625644,79.5103653 29.1538006,79.5103653 C33.5450368,79.5103653 37.1048371,83.0701656 37.1048371,87.4614018 C37.1048371,91.852638 33.5450368,95.4124383 29.1538006,95.4124383 Z" id="Shape"></path>
            <path d="M66.2586377,74.2096742 C58.9399107,74.2096742 53.0069102,80.1426747 53.0069102,87.4614018 C53.0069102,94.7801288 58.9399107,100.713129 66.2586377,100.713129 C73.5773647,100.713129 79.5103653,94.7801288 79.5103653,87.4614018 C79.5103653,80.1426747 73.5773647,74.2096742 66.2586377,74.2096742 L66.2586377,74.2096742 Z M66.2586377,95.4124383 C61.8674015,95.4124383 58.3076012,91.852638 58.3076012,87.4614018 C58.3076012,83.0701656 61.8674015,79.5103653 66.2586377,79.5103653 C70.6498739,79.5103653 74.2096742,83.0701656 74.2096742,87.4614018 C74.2096742,91.852638 70.6498739,95.4124383 66.2586377,95.4124383 Z" id="Shape"></path>
            <path d="M103.363475,74.2096742 C96.0447478,74.2096742 90.1117473,80.1426747 90.1117473,87.4614018 C90.1117473,94.7801288 96.0447478,100.713129 103.363475,100.713129 C110.682202,100.713129 116.615202,94.7801288 116.615202,87.4614018 C116.615202,80.1426747 110.682202,74.2096742 103.363475,74.2096742 L103.363475,74.2096742 Z M103.363475,95.4124383 C98.9722386,95.4124383 95.4124383,91.852638 95.4124383,87.4614018 C95.4124383,83.0701656 98.9722386,79.5103653 103.363475,79.5103653 C107.754711,79.5103653 111.314511,83.0701656 111.314511,87.4614018 C111.314511,91.852638 107.754711,95.4124383 103.363475,95.4124383 Z" id="Shape"></path>
        </g>
    </g>
</svg>
';
    }

    /**
     * The model the resource corresponds to.
     *
     * @var string
     */
    public static $model = \App\Models\Event::class;

    /**
     * The single value that should be used to represent the resource when being displayed.
     *
     * @var string
     */
    public static $title = 'name';

    /**
     * The columns that should be searched.
     *
     * @var array
     */
    public static $search = [
        'name',
    ];

    /**
     * Get the fields displayed by the resource.
     *
     * @param \Illuminate\Http\Request $request
     * @return array
     */
    public function fields(Request $request)
    {
        return [
//            ID::make(__('ID'), 'id')->sortable(),
            Text::make(__('Name'), 'name')->required(),
            Textarea::make(__('Description'), 'description')->rows(4)->required(),
            Date::make(__('Starting Date'), 'date')->sortable()->required(),
            TextAutoComplete::make(__('Duration'), 'duration')->items([
                '1 Hour',
                '2 Hours',
                '3 Hours',
                '4 Hours',
                '5 Hours',
                '6 Hours',
            ])->required(),
            Text::make(__('Organizers'), 'organizers')->required(),
            Text::make(__('Location'), 'location')->required(),
            Number::make(__('Number Of Participants'), 'number_of_participants')->required(),

            BelongsToMany::make('attendees'),


        ];
    }

    /**
     * Get the cards available for the request.
     *
     * @param \Illuminate\Http\Request $request
     * @return array
     */
    public function cards(Request $request)
    {
        return [];
    }

    /**
     * Get the filters available for the resource.
     *
     * @param \Illuminate\Http\Request $request
     * @return array
     */
    public function filters(Request $request)
    {
        return [];
    }

    /**
     * Get the lenses available for the resource.
     *
     * @param \Illuminate\Http\Request $request
     * @return array
     */
    public function lenses(Request $request)
    {
        return [];
    }

    /**
     * Get the actions available for the resource.
     *
     * @param \Illuminate\Http\Request $request
     * @return array
     */
    public function actions(Request $request)
    {
        return [
            (new AttendeesImporter)->showOnTableRow()
        ];
    }
}
